function ct(e,t,n,r,a){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:a;return e===a?n:e}var ne="undefined",Q="object",kt="any",At="*",J="__",Le=typeof process<"u"?process:{};Le.env&&Le.env.NODE_ENV;var H=typeof document<"u";Le.versions!=null&&Le.versions.node!=null;typeof Deno<"u"&&Deno.core;H&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent!==void 0&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));function Tt(e,t){return t.charAt(0)[e]()+t.slice(1)}var nn=Tt.bind(null,"toUpperCase"),rn=Tt.bind(null,"toLowerCase");function on(e){return Mt(e)?nn("null"):typeof e=="object"?ln(e):Object.prototype.toString.call(e).slice(8,-1)}function qe(e,t){t===void 0&&(t=!0);var n=on(e);return t?rn(n):n}function $e(e,t){return typeof t===e}var K=$e.bind(null,"function"),ce=$e.bind(null,"string"),ae=$e.bind(null,"undefined"),an=$e.bind(null,"boolean");$e.bind(null,"symbol");function Mt(e){return e===null}function un(e){return qe(e)==="number"&&!isNaN(e)}function cn(e){return qe(e)==="array"}function X(e){if(!sn(e))return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function sn(e){return e&&(typeof e=="object"||e!==null)}function ln(e){return K(e.constructor)?e.constructor.name:null}function fn(e){return e instanceof Error||ce(e.message)&&e.constructor&&un(e.constructor.stackTraceLimit)}function zt(e,t){if(typeof t!="object"||Mt(t))return!1;if(t instanceof e)return!0;var n=qe(new e(""));if(fn(t))for(;t;){if(qe(t)===n)return!0;t=Object.getPrototypeOf(t)}return!1}zt.bind(null,TypeError);zt.bind(null,SyntaxError);function Ve(e,t){var n=e instanceof Element||e instanceof HTMLDocument;return n&&t?dn(e,t):n}function dn(e,t){return t===void 0&&(t=""),e&&e.nodeName===t.toUpperCase()}function Re(e){var t=[].slice.call(arguments,1);return function(){return e.apply(void 0,[].slice.call(arguments).concat(t))}}Re(Ve,"form");Re(Ve,"button");Re(Ve,"input");Re(Ve,"select");function st(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function pn(){if(H){var e=navigator,t=e.languages;return e.userLanguage||(t&&t.length?t[0]:e.language)}}function gn(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}}function mn(e){return function(t){for(var n,r=Object.create(null),a=/([^&=]+)=?([^&]*)/g;n=a.exec(t);){var u=st(n[1]),c=st(n[2]);u.substring(u.length-2)==="[]"?(r[u=u.substring(0,u.length-2)]||(r[u]=[])).push(c):r[u]=c===""||c}for(var s in r){var b=s.split("[");b.length>1&&(vn(r,b.map(function(v){return v.replace(/[?[\]\\ ]/g,"")}),r[s]),delete r[s])}return r}(function(t){if(t){var n=t.match(/\?(.*)/);return n&&n[1]?n[1].split("#")[0]:""}return H&&window.location.search.substring(1)}(e))}function vn(e,t,n){for(var r=t.length-1,a=0;a<r;++a){var u=t[a];if(u==="__proto__"||u==="constructor")break;u in e||(e[u]={}),e=e[u]}e[t[r]]=n}function Je(){for(var e="",t=0,n=4294967295*Math.random()|0;t++<36;){var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[t-1],a=15&n;e+=r=="-"||r=="4"?r:(r=="x"?a:3&a|8).toString(16),n=t%8==0?4294967295*Math.random()|0:n>>4}return e}var fe=J+"global"+J,de=typeof self===Q&&self.self===self&&self||typeof global===Q&&global.global===global&&global||void 0;function lt(e){return de[fe][e]}function Qe(e,t){return de[fe][e]=t}function Ut(e){delete de[fe][e]}de[fe]||(de[fe]={});function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}var te="function",Y="undefined",yn="@@redux/"+Math.random().toString(36),ft=function(){return typeof Symbol===te&&Symbol.observable||"@@observable"}(),Ae=" != "+te;function Ct(e,t,n){var r;if(typeof t===te&&typeof n===Y&&(n=t,t=void 0),typeof n!==Y){if(typeof n!==te)throw new Error("enhancer"+Ae);return n(Ct)(e,t)}if(typeof e!==te)throw new Error("reducer"+Ae);var a=e,u=t,c=[],s=c,b=!1;function v(){s===c&&(s=c.slice())}function k(){return u}function p(h){if(typeof h!==te)throw new Error("Listener"+Ae);var A=!0;return v(),s.push(h),function(){if(A){A=!1,v();var P=s.indexOf(h);s.splice(P,1)}}}function j(h){if(!X(h))throw new Error("Act != obj");if(typeof h.type===Y)throw new Error("ActType "+Y);if(b)throw new Error("Dispatch in reducer");try{b=!0,u=a(u,h)}finally{b=!1}for(var A=c=s,P=0;P<A.length;P++)(0,A[P])();return h}return j({type:"@@redux/INIT"}),(r={dispatch:j,subscribe:p,getState:k,replaceReducer:function(h){if(typeof h!==te)throw new Error("next reducer"+Ae);a=h,j({type:"@@redux/INIT"})}})[ft]=function(){var h,A=p;return(h={subscribe:function(P){if(typeof P!="object")throw new TypeError("Observer != obj");function I(){P.next&&P.next(k())}return I(),{unsubscribe:A(I)}}})[ft]=function(){return this},h},r}function hn(e,t){var n=t&&t.type;return"action "+(n&&n.toString()||"?")+"reducer "+e+" returns "+Y}function pe(){var e=[].slice.call(arguments);return e.length===0?function(t){return t}:e.length===1?e[0]:e.reduce(function(t,n){return function(){return t(n.apply(void 0,[].slice.call(arguments)))}})}function bn(){var e=arguments;return function(t){return function(n,r,a){var u,c=t(n,r,a),s=c.dispatch,b={getState:c.getState,dispatch:function(v){return s(v)}};return u=[].slice.call(e).map(function(v){return v(b)}),m({},c,{dispatch:s=pe.apply(void 0,u)(c.dispatch)})}}}var Z=J+"anon_id",re=J+"user_id",oe=J+"user_traits",cr={__proto__:null,ANON_ID:Z,USER_ID:re,USER_TRAITS:oe},ee="userId",ue="anonymousId",De=["bootstrap","params","campaign","initializeStart","initialize","initializeEnd","ready","resetStart","reset","resetEnd","pageStart","page","pageEnd","pageAborted","trackStart","track","trackEnd","trackAborted","identifyStart","identify","identifyEnd","identifyAborted","userIdChanged","registerPlugins","enablePlugin","disablePlugin","online","offline","setItemStart","setItem","setItemEnd","setItemAborted","removeItemStart","removeItem","removeItemEnd","removeItemAborted"],Ye=["name","EVENTS","config","loaded"],g=De.reduce(function(e,t){return e[t]=t,e},{registerPluginType:function(e){return"registerPlugin:"+e},pluginReadyType:function(e){return"ready:"+e}}),dt=/^utm_/,pt=/^an_prop_/,gt=/^an_trait_/;function In(e){var t=e.storage.setItem;return function(n){return function(r){return function(a){if(a.type===g.bootstrap){var u=a.params,c=a.user,s=a.persistedUser,b=a.initialUser,v=s.userId===c.userId;s.anonymousId!==c.anonymousId&&t(Z,c.anonymousId),v||t(re,c.userId),b.traits&&t(oe,m({},v&&s.traits?s.traits:{},b.traits));var k=Object.keys(a.params);if(k.length){var p=u.an_uid,j=u.an_event,h=k.reduce(function(A,P){if(P.match(dt)||P.match(/^(d|g)clid/)){var I=P.replace(dt,"");A.campaign[I==="campaign"?"name":I]=u[P]}return P.match(pt)&&(A.props[P.replace(pt,"")]=u[P]),P.match(gt)&&(A.traits[P.replace(gt,"")]=u[P]),A},{campaign:{},props:{},traits:{}});n.dispatch(m({type:g.params,raw:u},h,p?{userId:p}:{})),p&&setTimeout(function(){return e.identify(p,h.traits)},0),j&&setTimeout(function(){return e.track(j,h.props)},0),Object.keys(h.campaign).length&&n.dispatch({type:g.campaign,campaign:h.campaign})}}return r(a)}}}}function wn(e){return function(t,n){if(t===void 0&&(t={}),n===void 0&&(n={}),n.type===g.setItemEnd){if(n.key===Z)return m({},t,{anonymousId:n.value});if(n.key===re)return m({},t,{userId:n.value})}switch(n.type){case g.identify:return Object.assign({},t,{userId:n.userId,traits:m({},t.traits,n.traits)});case g.reset:return[re,Z,oe].forEach(function(r){e.removeItem(r)}),Object.assign({},t,{userId:null,anonymousId:null,traits:{}});default:return t}}}function mt(e){return{userId:e.getItem(re),anonymousId:e.getItem(Z),traits:e.getItem(oe)}}var Ze=function(e){return J+"TEMP"+J+e};function Sn(e){var t=e.storage,n=t.setItem,r=t.removeItem,a=t.getItem;return function(u){return function(c){return function(s){var b=s.userId,v=s.traits,k=s.options;if(s.type===g.reset&&([re,oe,Z].forEach(function(h){r(h)}),[ee,ue,"traits"].forEach(function(h){Ut(Ze(h))})),s.type===g.identify){a(Z)||n(Z,Je());var p=a(re),j=a(oe)||{};p&&p!==b&&u.dispatch({type:g.userIdChanged,old:{userId:p,traits:j},new:{userId:b,traits:v},options:k}),b&&n(re,b),v&&n(oe,m({},j,v))}return c(s)}}}}var ve={};function vt(e,t){ve[e]&&K(ve[e])&&(ve[e](t),delete ve[e])}function Dt(e,t,n){return new Promise(function(r,a){return t()?r(e):n<1?a(m({},e,{queue:!0})):new Promise(function(u){return setTimeout(u,10)}).then(function(u){return Dt(e,t,n-10).then(r,a)})})}function Lt(e,t,n){var r=t(),a=e.getState(),u=a.plugins,c=a.queue,s=a.user;if(!a.context.offline&&c&&c.actions&&c.actions.length){var b=c.actions.reduce(function(k,p,j){return u[p.plugin].loaded?(k.process.push(p),k.processIndex.push(j)):(k.requeue.push(p),k.requeueIndex.push(j)),k},{processIndex:[],process:[],requeue:[],requeueIndex:[]});if(b.processIndex&&b.processIndex.length){b.processIndex.forEach(function(k){var p=c.actions[k],j=p.plugin,h=p.payload.type,A=r[j][h];if(A&&K(A)){var P=function(O,N){return O===void 0&&(O={}),N===void 0&&(N={}),[ee,ue].reduce(function(T,d){return O.hasOwnProperty(d)&&N[d]&&N[d]!==O[d]&&(T[d]=N[d]),T},O)}(p.payload,s);A({payload:P,config:u[j].config,instance:n});var I=h+":"+j;e.dispatch(m({},P,{type:I,_:{called:I,from:"queueDrain"}}))}});var v=c.actions.filter(function(k,p){return!~b.processIndex.indexOf(p)});c.actions=v}}}var Xe=function(e){var t=e.data,n=e.action,r=e.instance,a=e.state,u=e.allPlugins,c=e.allMatches,s=e.store,b=e.EVENTS;try{var v=a.plugins,k=a.context,p=n.type,j=p.match(se),h=t.exact.map(function(I){return I.pluginName});j&&(h=c.during.map(function(I){return I.pluginName}));var A=function(I,O){return function(N,T,d){var f=T.config,U=T.name,M=U+"."+N.type;d&&(M=d.event);var _=N.type.match(se)?function(C,z,F,D,W){return function(q,y){var R=D?D.name:C,B=y&&we(y)?y:F;if(D&&(!(B=y&&we(y)?y:[C]).includes(C)||B.length!==1))throw new Error("Method "+z+" can only abort "+C+" plugin. "+JSON.stringify(B)+" input valid");return m({},W,{abort:{reason:q,plugins:B,caller:z,_:R}})}}(U,M,O,d,N):function(C,z){return function(){throw new Error(C.type+" action not cancellable. Remove abort in "+z)}}(N,M);return{payload:Pn(N),instance:I,config:f||{},abort:_}}}(r,h),P=t.exact.reduce(function(I,O){var N=O.pluginName,T=O.methodName,d=!1;return T.match(/^initialize/)||T.match(/^reset/)||(d=!v[N].loaded),k.offline&&T.match(/^(page|track|identify)/)&&(d=!0),I[""+N]=d,I},{});return Promise.resolve(t.exact.reduce(function(I,O,N){try{var T=O.pluginName;return Promise.resolve(I).then(function(d){function f(){return Promise.resolve(d)}var U=function(){if(t.namespaced&&t.namespaced[T])return Promise.resolve(t.namespaced[T].reduce(function(M,_,C){try{return Promise.resolve(M).then(function(z){return _.method&&K(_.method)?(function(q,y){var R=Pt(q);if(R&&R.name===y){var B=Pt(R.method);throw new Error([y+" plugin is calling method "+q,"Plugins cant call self","Use "+R.method+" "+(B?"or "+B.method:"")+" in "+y+" plugin insteadof "+q].join(`
`))}}(_.methodName,_.pluginName),Promise.resolve(_.method({payload:z,instance:r,abort:(F=z,D=T,W=_.pluginName,function(q,y){return m({},F,{abort:{reason:q,plugins:y||[D],caller:p,from:W||D}})}),config:bt(_.pluginName,v,u),plugins:v})).then(function(q){var y=X(q)?q:{};return Promise.resolve(m({},z,y))})):z;var F,D,W})}catch(z){return Promise.reject(z)}},Promise.resolve(n))).then(function(M){d[T]=M});d[T]=n}();return U&&U.then?U.then(f):f()})}catch(d){return Promise.reject(d)}},Promise.resolve({}))).then(function(I){return Promise.resolve(t.exact.reduce(function(O,N,T){try{var d=t.exact.length===T+1,f=N.pluginName,U=u[f];return Promise.resolve(O).then(function(M){var _=I[f]?I[f]:{};if(j&&(_=M),Ge(_,f))return He({data:_,method:p,instance:r,pluginName:f,store:s}),Promise.resolve(M);if(Ge(M,f))return d&&He({data:M,method:p,instance:r,store:s}),Promise.resolve(M);if(P.hasOwnProperty(f)&&P[f]===!0)return s.dispatch({type:"queue",plugin:f,payload:_,_:{called:"queue",from:"queueMechanism"}}),Promise.resolve(M);var C=A(I[f],u[f]);return Promise.resolve(U[p]({abort:C.abort,payload:_,instance:r,config:bt(f,v,u),plugins:v})).then(function(z){var F=X(z)?z:{},D=m({},M,F),W=I[f];if(Ge(W,f))He({data:W,method:p,instance:r,pluginName:f,store:s});else{var q=p+":"+f;(q.match(/:/g)||[]).length<2&&!p.match(yt)&&!p.match(ht)&&r.dispatch(m({},j?D:_,{type:q,_:{called:q,from:"submethod"}}))}return Promise.resolve(D)})})}catch(M){return Promise.reject(M)}},Promise.resolve(n))).then(function(O){if(!(p.match(se)||p.match(/^registerPlugin/)||p.match(ht)||p.match(yt)||p.match(/^params/)||p.match(/^userIdChanged/))){if(b.plugins.includes(p),O._&&O._.originalAction===p)return O;var N=m({},O,{_:{originalAction:O.type,called:O.type,from:"engineEnd"}});qt(O,t.exact.length)&&!p.match(/End$/)&&(N=m({},N,{type:O.type+"Aborted"})),s.dispatch(N)}return O})})}catch(I){return Promise.reject(I)}},se=/Start$/,yt=/^bootstrap/,ht=/^ready/;function He(e){var t=e.pluginName,n=e.method+"Aborted"+(t?":"+t:"");e.store.dispatch(m({},e.data,{type:n,_:{called:n,from:"abort"}}))}function bt(e,t,n){var r=t[e]||n[e];return r&&r.config?r.config:{}}function It(e,t){return t.reduce(function(n,r){return r[e]?n.concat({methodName:e,pluginName:r.name,method:r[e]}):n},[])}function wt(e,t){var n=e.replace(se,""),r=t?":"+t:"";return[""+e+r,""+n+r,n+"End"+r]}function Ge(e,t){var n=e.abort;return!!n&&(n===!0||St(n,t)||n&&St(n.plugins,t))}function qt(e,t){var n=e.abort;if(!n)return!1;if(n===!0||ce(n))return!0;var r=n.plugins;return we(n)&&n.length===t||we(r)&&r.length===t}function we(e){return Array.isArray(e)}function St(e,t){return!(!e||!we(e))&&e.includes(t)}function Pt(e){var t=e.match(/(.*):(.*)/);return!!t&&{method:t[1],name:t[2]}}function Pn(e){return Object.keys(e).reduce(function(t,n){return n==="type"||(t[n]=X(e[n])?Object.assign({},e[n]):e[n]),t},{})}function En(e,t,n){var r={};return function(a){return function(u){return function(c){try{var s,b=function(d){return s?d:u(p)},v=c.type,k=c.plugins,p=c;if(c.abort)return Promise.resolve(u(c));if(v===g.enablePlugin&&a.dispatch({type:g.initializeStart,plugins:k,disabled:[],fromEnable:!0,meta:c.meta}),v===g.disablePlugin&&setTimeout(function(){return vt(c.meta.rid,{payload:c})},0),v===g.initializeEnd){var j=t(),h=Object.keys(j),A=h.filter(function(d){return k.includes(d)}).map(function(d){return j[d]}),P=[],I=[],O=c.disabled,N=A.map(function(d){var f=d.loaded,U=d.name,M=d.config;return Dt(d,function(){return f({config:M})},1e4).then(function(_){return r[U]||(a.dispatch({type:g.pluginReadyType(U),name:U,events:Object.keys(d).filter(function(C){return!Ye.includes(C)})}),r[U]=!0),P=P.concat(U),d}).catch(function(_){if(_ instanceof Error)throw new Error(_);return I=I.concat(_.name),_})});Promise.all(N).then(function(d){var f={plugins:P,failed:I,disabled:O};setTimeout(function(){h.length===N.length+O.length&&a.dispatch(m({},{type:g.ready},f))},0)})}var T=function(){if(v!==g.bootstrap)return/^ready:([^:]*)$/.test(v)&&setTimeout(function(){return Lt(a,t,e)},0),Promise.resolve(function(d,f,U,M,_){try{var C=K(f)?f():f,z=d.type,F=z.replace(se,"");if(d._&&d._.called)return Promise.resolve(d);var D=U.getState(),W=(R=C,(B=D.plugins)===void 0&&(B={}),(ge=d.options)===void 0&&(ge={}),Object.keys(R).filter(function(i){var o=ge.plugins||{};return an(o[i])?o[i]:o.all!==!1&&(!B[i]||B[i].enabled!==!1)}).map(function(i){return R[i]}));z===g.initializeStart&&d.fromEnable&&(W=Object.keys(D.plugins).filter(function(i){var o=D.plugins[i];return d.plugins.includes(i)&&!o.initialized}).map(function(i){return C[i]}));var q=W.map(function(i){return i.name}),y=function(i,o,l){var w=wt(i).map(function(S){return It(S,o)});return o.reduce(function(S,E){var V=E.name,$=wt(i,V).map(function(me){return It(me,o)}),L=$[0],x=$[1],G=$[2];return L.length&&(S.beforeNS[V]=L),x.length&&(S.duringNS[V]=x),G.length&&(S.afterNS[V]=G),S},{before:w[0],beforeNS:{},during:w[1],duringNS:{},after:w[2],afterNS:{}})}(z,W);return Promise.resolve(Xe({action:d,data:{exact:y.before,namespaced:y.beforeNS},state:D,allPlugins:C,allMatches:y,instance:U,store:M,EVENTS:_})).then(function(i){function o(){var S=function(){if(z.match(se))return Promise.resolve(Xe({action:m({},l,{type:F+"End"}),data:{exact:y.after,namespaced:y.afterNS},state:D,allPlugins:C,allMatches:y,instance:U,store:M,EVENTS:_})).then(function(E){E.meta&&E.meta.hasCallback&&vt(E.meta.rid,{payload:E})})}();return S&&S.then?S.then(function(){return i}):i}if(qt(i,q.length))return i;var l,w=function(){if(z!==F)return Promise.resolve(Xe({action:m({},i,{type:F}),data:{exact:y.during,namespaced:y.duringNS},state:D,allPlugins:C,allMatches:y,instance:U,store:M,EVENTS:_})).then(function(S){l=S});l=i}();return w&&w.then?w.then(o):o()})}catch(i){return Promise.reject(i)}var R,B,ge}(c,t,e,a,n)).then(function(d){return s=1,u(d)})}();return Promise.resolve(T&&T.then?T.then(b):b(T))}catch(d){return Promise.reject(d)}}}}}function On(e){return function(t){return function(n){return function(r){var a=r.type,u=r.key,c=r.value,s=r.options;if(a===g.setItem||a===g.removeItem){if(r.abort)return n(r);a===g.setItem?e.setItem(u,c,s):e.removeItem(u,s)}return n(r)}}}}var xn=function(){var e=this;this.before=[],this.after=[],this.addMiddleware=function(t,n){e[n]=e[n].concat(t)},this.removeMiddleware=function(t,n){var r=e[n].findIndex(function(a){return a===t});r!==-1&&(e[n]=[].concat(e[n].slice(0,r),e[n].slice(r+1)))},this.dynamicMiddlewares=function(t){return function(n){return function(r){return function(a){var u={getState:n.getState,dispatch:function(s){return n.dispatch(s)}},c=e[t].map(function(s){return s(u)});return pe.apply(void 0,c)(r)(a)}}}}};function jn(e){return function(t,n){t===void 0&&(t={});var r={};if(n.type==="initialize:aborted")return t;if(/^registerPlugin:([^:]*)$/.test(n.type)){var a=Et(n.type,"registerPlugin"),u=e()[a];if(!u||!a)return t;var c=n.enabled,s=u.config;return r[a]={enabled:c,initialized:!!c&&!u.initialize,loaded:!!c&&!!u.loaded({config:s}),config:s},m({},t,r)}if(/^initialize:([^:]*)$/.test(n.type)){var b=Et(n.type,g.initialize),v=e()[b];return v&&b?(r[b]=m({},t[b],{initialized:!0,loaded:!!v.loaded({config:v.config})}),m({},t,r)):t}if(/^ready:([^:]*)$/.test(n.type))return r[n.name]=m({},t[n.name],{loaded:!0}),m({},t,r);switch(n.type){case g.disablePlugin:return m({},t,Ot(n.plugins,!1,t));case g.enablePlugin:return m({},t,Ot(n.plugins,!0,t));default:return t}}}function Et(e,t){return e.substring(t.length+1,e.length)}function Ot(e,t,n){return e.reduce(function(r,a){return r[a]=m({},n[a],{enabled:t}),r},n)}function Vt(e){try{return JSON.parse(JSON.stringify(e))}catch{}return e}var Nn={last:{},history:[]};function _n(e,t){e===void 0&&(e=Nn);var n=t.options,r=t.meta;if(t.type===g.track){var a=Vt(m({event:t.event,properties:t.properties},Object.keys(n).length&&{options:n},{meta:r}));return m({},e,{last:a,history:e.history.concat(a)})}return e}var $n={actions:[]};function kn(e,t){e===void 0&&(e=$n);var n=t.payload;switch(t.type){case"queue":var r;return r=n&&n.type&&n.type===g.identify?[t].concat(e.actions):e.actions.concat(t),m({},e,{actions:r});case"dequeue":return[];default:return e}}var Rt=/#.*$/;function An(e){var t=/(http[s]?:\/\/)?([^\/\s]+\/)(.*)/g.exec(e);return"/"+(t&&t[3]?t[3].split("?")[0].replace(Rt,""):"")}var Jt,Bt,Ft,Wt,Tn=function(e){if(e===void 0&&(e={}),!H)return e;var t=document,n=t.title,r=t.referrer,a=window,u=a.location,c=a.innerWidth,s=a.innerHeight,b=u.hash,v=u.search,k=function(j){var h=function(){if(H){for(var A,P=document.getElementsByTagName("link"),I=0;A=P[I];I++)if(A.getAttribute("rel")==="canonical")return A.getAttribute("href")}}();return h?h.match(/\?/)?h:h+j:window.location.href.replace(Rt,"")}(v),p={title:n,url:k,path:An(k),hash:b,search:v,width:c,height:s};return r&&r!==""&&(p.referrer=r),m({},p,e)},Mn={last:{},history:[]};function zn(e,t){e===void 0&&(e=Mn);var n=t.options;if(t.type===g.page){var r=Vt(m({properties:t.properties,meta:t.meta},Object.keys(n).length&&{options:n}));return m({},e,{last:r,history:e.history.concat(r)})}return e}Jt=function(){if(!H)return!1;var e=navigator.appVersion;return~e.indexOf("Win")?"Windows":~e.indexOf("Mac")?"MacOS":~e.indexOf("X11")?"UNIX":~e.indexOf("Linux")?"Linux":"Unknown OS"}(),Bt=H?document.referrer:null,Ft=pn(),Wt=gn();var xt={initialized:!1,sessionId:Je(),app:null,version:null,debug:!1,offline:!!H&&!navigator.onLine,os:{name:Jt},userAgent:H?navigator.userAgent:"node",library:{name:"analytics",version:"0.12.4"},timezone:Wt,locale:Ft,campaign:{},referrer:Bt};function Un(e,t){e===void 0&&(e=xt);var n=e.initialized,r=t.campaign;switch(t.type){case g.campaign:return m({},e,{campaign:r});case g.offline:return m({},e,{offline:!0});case g.online:return m({},e,{offline:!1});default:return n?e:m({},xt,e,{initialized:!0})}}var Cn=["plugins","reducers","storage"];function Dn(e,t,n){if(H){var r=window[(n?"add":"remove")+"EventListener"];e.split(" ").forEach(function(a){r(a,t)})}}function Ln(e){var t=Dn.bind(null,"online offline",function(n){return Promise.resolve(!navigator.onLine).then(e)});return t(!0),function(n){return t(!1)}}function Xt(){return Qe("analytics",[]),function(e){return function(t,n,r){var a=e(t,n,r),u=a.dispatch;return Object.assign(a,{dispatch:function(c){return de[fe].analytics.push(c.action||c),u(c)}})}}}function jt(e){return function(){return pe(pe.apply(null,arguments),Xt())}}function Ke(e){return e?cn(e)?e:[e]:[]}function Nt(e,t,n){e===void 0&&(e={});var r,a,u=Je();return t&&(ve[u]=(r=t,a=function(c){for(var s,b=c||Array.prototype.slice.call(arguments),v=0;v<b.length;v++)if(K(b[v])){s=b[v];break}return s}(n),function(c){a&&a(c),r(c)})),m({},e,{rid:u,ts:new Date().getTime()},t?{hasCallback:!0}:{})}function qn(e){e===void 0&&(e={});var t=e.reducers||{},n=e.initialUser||{},r=(e.plugins||[]).reduce(function(i,o){if(K(o))return i.middlewares=i.middlewares.concat(o),i;if(o.NAMESPACE&&(o.name=o.NAMESPACE),!o.name)throw new Error("https://lytics.dev/errors/1");o.config||(o.config={});var l=o.EVENTS?Object.keys(o.EVENTS).map(function(E){return o.EVENTS[E]}):[];i.pluginEnabled[o.name]=!(o.enabled===!1||o.config.enabled===!1),delete o.enabled,o.methods&&(i.methods[o.name]=Object.keys(o.methods).reduce(function(E,V){var $;return E[V]=($=o.methods[V],function(){for(var L=Array.prototype.slice.call(arguments),x=new Array($.length),G=0;G<L.length;G++)x[G]=L[G];return x[x.length]=f,$.apply({instance:f},x)}),E},{}),delete o.methods);var w=Object.keys(o).concat(l),S=new Set(i.events.concat(w));if(i.events=Array.from(S),i.pluginsArray=i.pluginsArray.concat(o),i.plugins[o.name])throw new Error(o.name+"AlreadyLoaded");return i.plugins[o.name]=o,i.plugins[o.name].loaded||(i.plugins[o.name].loaded=function(){return!0}),i},{plugins:{},pluginEnabled:{},methods:{},pluginsArray:[],middlewares:[],events:[]}),a=e.storage?e.storage:{getItem:lt,setItem:Qe,removeItem:Ut},u=function(i){return function(o,l,w){return l.getState("user")[o]||(w&&X(w)&&w[o]?w[o]:mt(i)[o]||lt(Ze(o))||null)}}(a),c=r.plugins,s=r.events.filter(function(i){return!Ye.includes(i)}).sort(),b=new Set(s.concat(De).filter(function(i){return!Ye.includes(i)})),v=Array.from(b).sort(),k=function(){return c},p=new xn,j=p.addMiddleware,h=p.removeMiddleware,A=p.dynamicMiddlewares,P=function(){throw new Error("Abort disabled inListener")},I=mn(),O=mt(a),N=m({},O,n,I.an_uid?{userId:I.an_uid}:{},I.an_aid?{anonymousId:I.an_aid}:{});N.anonymousId||(N.anonymousId=Je());var T=m({enable:function(i,o){return new Promise(function(l){y.dispatch({type:g.enablePlugin,plugins:Ke(i),_:{originalAction:g.enablePlugin}},l,[o])})},disable:function(i,o){return new Promise(function(l){y.dispatch({type:g.disablePlugin,plugins:Ke(i),_:{originalAction:g.disablePlugin}},l,[o])})}},r.methods),d=!1,f={identify:function(i,o,l,w){try{var S=ce(i)?i:null,E=X(i)?i:o,V=l||{},$=f.user();Qe(Ze(ee),S);var L=S||E.userId||u(ee,f,E);return Promise.resolve(new Promise(function(x){y.dispatch(m({type:g.identifyStart,userId:L,traits:E||{},options:V,anonymousId:$.anonymousId},$.id&&$.id!==S&&{previousId:$.id}),x,[o,l,w])}))}catch(x){return Promise.reject(x)}},track:function(i,o,l,w){try{var S=X(i)?i.event:i;if(!S||!ce(S))throw new Error("EventMissing");var E=X(i)?i:o||{},V=X(l)?l:{};return Promise.resolve(new Promise(function($){y.dispatch({type:g.trackStart,event:S,properties:E,options:V,userId:u(ee,f,o),anonymousId:u(ue,f,o)},$,[o,l,w])}))}catch($){return Promise.reject($)}},page:function(i,o,l){try{var w=X(i)?i:{},S=X(o)?o:{};return Promise.resolve(new Promise(function(E){y.dispatch({type:g.pageStart,properties:Tn(w),options:S,userId:u(ee,f,w),anonymousId:u(ue,f,w)},E,[i,o,l])}))}catch(E){return Promise.reject(E)}},user:function(i){if(i===ee||i==="id")return u(ee,f);if(i===ue||i==="anonId")return u(ue,f);var o=f.getState("user");return i?ct(o,i):o},reset:function(i){return new Promise(function(o){y.dispatch({type:g.resetStart},o,i)})},ready:function(i){return d&&i({plugins:T,instance:f}),f.on(g.ready,function(o){i(o),d=!0})},on:function(i,o){if(!i||!K(o))return!1;if(i===g.bootstrap)throw new Error(".on disabled for "+i);var l=/Start$|Start:/;if(i==="*"){var w=function($){return function(L){return function(x){return x.type.match(l)&&o({payload:x,instance:f,plugins:c}),L(x)}}},S=function($){return function(L){return function(x){return x.type.match(l)||o({payload:x,instance:f,plugins:c}),L(x)}}};return j(w,Te),j(S,Me),function(){h(w,Te),h(S,Me)}}var E=i.match(l)?Te:Me,V=function($){return function(L){return function(x){return x.type===i&&o({payload:x,instance:f,plugins:c,abort:P}),L(x)}}};return j(V,E),function(){return h(V,E)}},once:function(i,o){if(!i||!K(o))return!1;if(i===g.bootstrap)throw new Error(".once disabled for "+i);var l=f.on(i,function(w){o({payload:w.payload,instance:f,plugins:c,abort:P}),l()});return l},getState:function(i){var o=y.getState();return i?ct(o,i):Object.assign({},o)},dispatch:function(i){var o=ce(i)?{type:i}:i;if(De.includes(o.type))throw new Error("reserved action "+o.type);var l=m({},o,{_:m({originalAction:o.type},i._||{})});y.dispatch(l)},enablePlugin:T.enable,disablePlugin:T.disable,plugins:T,storage:{getItem:a.getItem,setItem:function(i,o,l){y.dispatch({type:g.setItemStart,key:i,value:o,options:l})},removeItem:function(i,o){y.dispatch({type:g.removeItemStart,key:i,options:o})}},setAnonymousId:function(i,o){f.storage.setItem(Z,i,o)},events:{core:De,plugins:s}},U=r.middlewares.concat([function(i){return function(o){return function(l){return l.meta||(l.meta=Nt()),o(l)}}},A(Te),En(f,k,{all:v,plugins:s}),On(a),In(f),Sn(f),A(Me)]),M={context:Un,user:wn(a),page:zn,track:_n,plugins:jn(k),queue:kn},_=pe,C=pe;if(H&&e.debug){var z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;z&&(_=z({trace:!0,traceLimit:25})),C=function(){return arguments.length===0?Xt():X(typeof arguments[0])?jt():jt().apply(null,arguments)}}var F,D=function(i){return Object.keys(i).reduce(function(o,l){return Cn.includes(l)||(o[l]=i[l]),o},{})}(e),W=r.pluginsArray.reduce(function(i,o){var l=o.name,w=o.config,S=o.loaded,E=r.pluginEnabled[l];return i[l]={enabled:E,initialized:!!E&&!o.initialize,loaded:!!S({config:w}),config:w},i},{}),q={context:D,user:N,plugins:W},y=Ct(function(i){for(var o=Object.keys(i),l={},w=0;w<o.length;w++){var S=o[w];typeof i[S]===te&&(l[S]=i[S])}var E,V=Object.keys(l);try{(function($){Object.keys($).forEach(function(L){var x=$[L];if(typeof x(void 0,{type:"@@redux/INIT"})===Y||typeof x(void 0,{type:yn})===Y)throw new Error("reducer "+L+" "+Y)})})(l)}catch($){E=$}return function($,L){if($===void 0&&($={}),E)throw E;for(var x=!1,G={},me=0;me<V.length;me++){var ke=V[me],ut=$[ke],We=(0,l[ke])(ut,L);if(typeof We===Y){var tn=hn(ke,L);throw new Error(tn)}G[ke]=We,x=x||We!==ut}return x?G:$}}(m({},M,t)),q,C(_(bn.apply(void 0,U))));y.dispatch=(F=y.dispatch,function(i,o,l){var w=m({},i,{meta:Nt(i.meta,o,Ke(l))});return F.apply(null,[w])});var R=Object.keys(c);y.dispatch({type:g.bootstrap,plugins:R,config:D,params:I,user:N,initialUser:n,persistedUser:O});var B=R.filter(function(i){return r.pluginEnabled[i]}),ge=R.filter(function(i){return!r.pluginEnabled[i]});return y.dispatch({type:g.registerPlugins,plugins:R,enabled:r.pluginEnabled}),r.pluginsArray.map(function(i,o){var l=i.bootstrap,w=i.config,S=i.name;l&&K(l)&&l({instance:f,config:w,payload:i}),y.dispatch({type:g.registerPluginType(S),name:S,enabled:r.pluginEnabled[S],plugin:i}),r.pluginsArray.length===o+1&&y.dispatch({type:g.initializeStart,plugins:B,disabled:ge})}),Ln(function(i){y.dispatch({type:i?g.offline:g.online})}),function(i,o,l){setInterval(function(){return Lt(i,o,l)},3e3)}(y,k,f),f}var Te="before",Me="after",ye="global",Se=J+"global"+J,Pe=typeof self===Q&&self.self===self&&self||typeof global===Q&&global.global===global&&global||void 0;function Ht(e){return Pe[Se][e]}function Vn(e,t){return Pe[Se][e]=t}function Rn(e){delete Pe[Se][e]}Pe[Se]||(Pe[Se]={});var Ee=J+"global"+J,Oe=typeof self===Q&&self.self===self&&self||typeof global===Q&&global.global===global&&global||void 0;function Jn(e){return Oe[Ee][e]}function Bn(e,t){return Oe[Ee][e]=t}function Fn(e){delete Oe[Ee][e]}Oe[Ee]||(Oe[Ee]={});var he="cookie",ie=Qt(),Gt=Be,Wn=Be;function Kt(e){return ie?Be(e,"",-1):Fn(e)}function Qt(){if(ie!==void 0)return ie;var e="cookiecookie";try{Be(e,e),ie=document.cookie.indexOf(e)!==-1,Kt(e)}catch{ie=!1}return ie}function Be(e,t,n,r,a,u){if(typeof window<"u"){var c=arguments.length>1;return ie===!1&&(c?Bn(e,t):Jn(e)),c?document.cookie=e+"="+encodeURIComponent(t)+(n?"; expires="+new Date(+new Date+1e3*n).toUTCString()+(r?"; path="+r:"")+(a?"; domain="+a:"")+(u?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}}var xe=J+"global"+J,je=typeof self===Q&&self.self===self&&self||typeof global===Q&&global.global===global&&global||void 0;function Xn(e){return je[xe][e]}function Hn(e,t){return je[xe][e]=t}function Gn(e){delete je[xe][e]}function et(e,t,n){var r;try{if(Yt(e)){var a=window[e];r=a[t].bind(a)}}catch{}return r||n}je[xe]||(je[xe]={});var ze={};function Yt(e){if(typeof ze[e]!==ne)return ze[e];try{var t=window[e];t.setItem(ne,ne),t.removeItem(ne)}catch{return ze[e]=!1}return ze[e]=!0}var be="localStorage",Kn=Yt.bind(null,"localStorage");et("localStorage","getItem",Xn);et("localStorage","setItem",Hn);et("localStorage","removeItem",Gn);var Ne=J+"global"+J,_e=typeof self===Q&&self.self===self&&self||typeof global===Q&&global.global===global&&global||void 0;function Qn(e){return _e[Ne][e]}function Yn(e,t){return _e[Ne][e]=t}function Zn(e){delete _e[Ne][e]}function tt(e,t,n){var r;try{if(Zt(e)){var a=window[e];r=a[t].bind(a)}}catch{}return r||n}_e[Ne]||(_e[Ne]={});var Ue={};function Zt(e){if(typeof Ue[e]!==ne)return Ue[e];try{var t=window[e];t.setItem(ne,ne),t.removeItem(ne)}catch{return Ue[e]=!1}return Ue[e]=!0}var Ie="sessionStorage",er=Zt.bind(null,"sessionStorage");tt("sessionStorage","getItem",Qn);tt("sessionStorage","setItem",Yn);tt("sessionStorage","removeItem",Zn);function le(e){var t=e;try{if((t=JSON.parse(e))==="true")return!0;if(t==="false")return!1;if(X(t))return t;parseFloat(t)===t&&(t=parseFloat(t))}catch{}if(t!==null&&t!=="")return t}var tr=Kn(),nr=er(),rr=Qt();function en(e,t){if(e){var n=nt(t),r=!at(n),a=rt(n)?le(localStorage.getItem(e)):void 0;if(r&&!ae(a))return a;var u=it(n)?le(Gt(e)):void 0;if(r&&u)return u;var c=ot(n)?le(sessionStorage.getItem(e)):void 0;if(r&&c)return c;var s=Ht(e);return r?s:{localStorage:a,sessionStorage:c,cookie:u,global:s}}}function ir(e,t,n){if(e&&!ae(t)){var r={},a=nt(n),u=JSON.stringify(t),c=!at(a);return rt(a)&&(r[be]=Ce(be,t,le(localStorage.getItem(e))),localStorage.setItem(e,u),c)?r[be]:it(a)&&(r[he]=Ce(he,t,le(Gt(e))),Wn(e,u),c)?r[he]:ot(a)&&(r[Ie]=Ce(Ie,t,le(sessionStorage.getItem(e))),sessionStorage.setItem(e,u),c)?r[Ie]:(r[ye]=Ce(ye,t,Ht(e)),Vn(e,t),c?r[ye]:r)}}function or(e,t){if(e){var n=nt(t),r=en(e,At),a={};return!ae(r.localStorage)&&rt(n)&&(localStorage.removeItem(e),a[be]=r.localStorage),!ae(r.cookie)&&it(n)&&(Kt(e),a[he]=r.cookie),!ae(r.sessionStorage)&&ot(n)&&(sessionStorage.removeItem(e),a[Ie]=r.sessionStorage),!ae(r.global)&&Fe(n,ye)&&(Rn(e),a[ye]=r.global),a}}function nt(e){return e?ce(e)?e:e.storage:kt}function rt(e){return tr&&Fe(e,be)}function it(e){return rr&&Fe(e,he)}function ot(e){return nr&&Fe(e,Ie)}function at(e){return e===At||e==="all"}function Fe(e,t){return e===kt||e===t||at(e)}function Ce(e,t,n){return{location:e,current:t,previous:n}}var ar={setItem:ir,getItem:en,removeItem:or};function ur(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_t(Object(n),!0).forEach(function(r){ur(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={storage:ar};return qn($t($t({},t),e))}export{sr as Analytics,cr as CONSTANTS,g as EVENTS,sr as default,sr as init};
